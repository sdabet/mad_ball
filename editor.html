<!doctype HTML>
<html>
    <head>
		<link rel="stylesheet" href="style/style.css"></link>
    	<link rel="stylesheet" href="style/editor.css"></link>
		<link rel="shortcut icon" type="image/png" href="images/ball.png" />
		<title>The mad ball editor</title>
		<script type="text/javascript">

            if(location.host === "sdabet.github.com") {
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-27157644-1']);
                _gaq.push(['_trackPageview']);
                
                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            }

		</script>
	</head>
	<body>
        <form id="dim_editor" class="editor" action="editor.html" style="text-align: center">
            <div style="display:none">
                <label for="board_width_field">Width</label>
                <input type="number" name="boardWidth" id="board_width_field" />
                <label for="board_height_field">Height</label>
                <input type="number" name="boardHeight" id="board_height_field" />
            </div>
            <label for="lines_field">Number of lines</label>
            <input type="number" name="lines" id="lines_field" />
            <input type="submit" value="Update" />
        </form>

		<div id="container">
			<div id="start_message">
				Level <span id="level"></span><br/><br/>
				Press &lt;space&gt; to start,<br/>
				&uarr; and &darr; to control the ball
			</div>
                                    
            <div class="editor_group">
                <button class="editor_button" onclick="level.clear();updateSerialization();" title="Clear the board">
                    <img width="50px" src="images/editor_clear.png"/>
                    <div>Clear</div>
                </button>
                <button class="editor_button" onclick="level.generate();updateSerialization();" title="Generate a random level">
                    <img width="50px" src="images/editor_generate.png"/>
                    <div>Random</div>
                </button>
                <button class="editor_button" onclick="openPlayUrl();" title="Play this level">
                    <img width="50px" src="images/editor_play.png"/>
                    <div>Play it</div>
                </button>
            </div>
    
            <div class="editor_group">
                <div>
                    <img class="preview wall selectable" type="wall" title="Add a wall" />
                    <img class="preview gum selectable" type="gum" title="Add a gum" />
                    <img class="preview left_bouncer selectable" type="left_bouncer" title="Add a left-oriented bouncer" />
                    <img class="preview right_bouncer selectable" type="right_bouncer" title="Add a right-oriented bouncer" />
                    <img class="preview left_teleporter selectable" type="left_teleporter" title="Add a left-oriented teleporter" />
                    <img class="preview right_teleporter selectable" type="right_teleporter" title="Add a right-oriented teleporter" />
                    <img class="preview invincible selectable" type="invincible" title="Add an invincible bonus" />
                    
                    <img class="preview erase selectable" type="erase" src="images/editor_erase.png" title="Remove an item" />
                </div>

        		<div id="board" style="position:relative;">
                    <img id="cursor" />
                </div>
                <div style="clear:both; padding-top: 10px;">
                    <label for="title_field">Title:</label>
                    <input id="title_field" type="text" name="title" style="width: 250px"/>
                </div>
            </div>

            <div class="editor_group">
                <details style="text-align:left">
                    <summary>Images</summary>
                    <div id="ball_editor" class="editor">
                        <img id="ball_preview" class="preview ball" />
                        <label class="url_label" for="ball_url_field">Ball</label>
                        <input id="ball_url_field" class="url_field" type="url" name="ball_url" value="" />
                        <input id="ball_file_field" type="file" class="file_field" />
                    </div>
                    <div id="wall_editor" class="editor">
                        <img id="wall_preview" class="preview wall" type="wall" />
                        <label class="url_label" for="wall_url_field">Wall</label>
                        <input id="wall_url_field" class="url_field" type="url" name="wall_url" value="" />
                        <input id="wall_file_field" type="file" class="file_field" />
                    </div>
                    <div id="gum_editor" class="editor">
                        <img id="gum_preview" class="preview gum" type="gum"/>
                        <label class="url_label" for="gum_url_field" >Gum</label>
                        <input id="gum_url_field" class="url_field" type="url" name="gum_url" value="" />
                        <input id="gum_file_field" type="file" class="file_field" />
                    </div>
                    <div id="left_bouncer_editor" class="editor">
                        <img id="left_bouncer_preview" class="preview left_bouncer" type="left_bouncer"/>
                        <label class="url_label" for="left_bouncer_url_field" >Left bouncer</label>
                        <input id="left_bouncer_url_field" class="url_field" type="url" name="left_bouncer_url" value="" />
                        <input id="left_bouncer_file_field" type="file" class="file_field" />
                    </div>
                    <div id="right_bouncer_editor" class="editor">
                        <img id="right_bouncer_preview" class="preview right_bouncer" type="right_bouncer"/>
                        <label class="url_label" for="right_bouncer_url_field" >Right bouncer</label>
                        <input id="right_bouncer_url_field" class="url_field" type="url" name="right_bouncer_url" value="" />
                        <input id="right_bouncer_file_field" type="file" class="file_field" />
                    </div>
                    <div id="left_teleporter_editor" class="editor">
                        <img id="left_teleporter_preview" class="preview left_teleporter" type="left_teleporter"/>
                        <label class="url_label" for="left_teleporter_url_field" >Left teleporter</label>
                        <input id="left_teleporter_url_field" class="url_field" type="url" name="left_teleporter_url" value="" />
                        <input id="left_teleporter_file_field" type="file" class="file_field" />
                    </div>
                    <div id="right_teleporter_editor" class="editor">
                        <img id="right_teleporter_preview" class="preview right_teleporter" type="right_teleporter"/>
                        <label class="url_label" for="right_teleporter_url_field" >Right teleporter</label>
                        <input id="right_teleporter_url_field" class="url_field" type="url" name="right_teleporter_url" value="" />
                        <input id="right_teleporter_file_field" type="file" class="file_field" />
                    </div>
                    <div id="invincible_editor" class="editor">
                        <img id="invincible_preview" class="preview invincible" type="invincible"/>
                        <label class="url_label" for="invincible" >Invincible</label>
                        <input id="invincible_url_field" class="url_field" type="url" name="invincible_url" value="" />
                        <input id="invincible_file_field" type="file" class="file_field" />
                    </div>
                    <div id="background_editor" class="editor">
                        <label for="background_field">Background-image</label>
                        <input id="background_field" type="text" name="background" value="" />
                    </div>
                </details>
            </div>

            <div style="clear:both; text-align: left;">
                <label for="serialization_without_images">Level data (without images):</label>
                <textarea id="serialization_without_images" class="serialization"></textarea>
            </div>

            <div style="clear:both; text-align: left;">
                <label for="serialization_with_images">Level data (with images):</label>
                <textarea id="serialization_with_images" class="serialization"></textarea>
            </div>

            <img id="serialization_without_images_img" style="float:left" />
        </div>
		
		<div id="modal_bg" class="modal"></div>
		<div class="modal">
			<div id="win" class="dialog"> 
				<h1>Congratulations</h1>
				<div>You succeeded in</div>
				<div id="score_container"><span id="score"></span>s</div>
				<div>Your best score is: <span id="high_score"></span>s</div>
				<br/>
				<a href="#" class="try_again">Next level</a>
			</div>
			<div id="lose" class="dialog">
				<h1>Game over!</h1>
				<a href="#" class="try_again">Try again</a>
			</div>
		</div>
			
    	<script src="script/level.js"></script>
        <script src="script/editor_resample.js"></script>
    	<script src="script/editor.js"></script>
	</body>
</html>
